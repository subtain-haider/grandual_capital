(()=>{"use strict";$(document).ready((function(){$("#isActiveFilter").select2({minimumResultsForSearch:-1,placeholder:"Select Status"});var e=$("#reportedUsersTable").DataTable({processing:!0,serverSide:!0,bStateSave:!0,order:[[2,"desc"]],ajax:{url:reportedUsersUrl,data:function(e){e.is_active_filter=$("#isActiveFilter").find("option:selected").val()}},columnDefs:[{targets:[4],orderable:!1,className:"text-center",width:"7%"},{targets:[3],orderable:!1,className:"text-center",width:"80px"},{targets:[2],width:"100px"}],columns:[{data:function(e){return htmlSpecialCharsDecode(e.reported_by.name)},name:"reportedBy.name"},{data:function(e){return htmlSpecialCharsDecode(e.reported_to.name)},name:"reportedTo.name"},{data:function(e){return e},render:function(e){return'<span data-toggle="tooltip" title="'+format(e.created_at,"hh:mm:ss a")+'">'+format(e.created_at)+"</span>"},name:"created_at"},{data:function(e){return e.reported_to.id==loggedInUserId?e.reported_to.is_active?"Active":"Deactive":(e.checked=0===e.reported_to.is_active?"":"checked",$.templates("#isActiveSwitch").render(e))},name:"id"},{data:function(e){return $.templates("#viewDelIcons").render(e)},name:"id"}],drawCallback:function(){this.api().state.clear(),$('[data-toggle="tooltip"]').tooltip()},fnInitComplete:function(){$("#isActiveFilter").change((function(){e.ajax.reload()}))}});window.format=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD-MMM-YYYY";return moment(e).format(t)};var t=Swal.mixin({customClass:{confirmButton:"btn btn-danger mr-2 btn-lg",cancelButton:"btn btn-secondary btn-lg"},buttonsStyling:!1});$(document).on("click",".delete-btn",(function(){var e=$(this).data("id");!function(e,r,a){t.fire({title:"Are you sure?",html:'Are you sure want to delete this "'+a+'" ?',icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then((function(t){t.value&&deleteItemAjax(e,r,a,null)}))}(reportedUsersUrl+"/"+e,"#reportedUsersTable","Reported User")})),$(document).on("click",".view-btn",(function(){var e=$(this).data("id"),t=reportedUsersUrl+"/"+e;$.ajax({type:"GET",url:t,success:function(e){$(".reported-user-notes").html(e.notes),$(".reported-by").text(e.reported_by.name),$(".reported-to").text(e.reported_to.name),$("#viewReportNoteModal").modal("show")}})})),$(document).on("change",".is-active",(function(e){var t=$(e.currentTarget).data("id");activeDeActiveUser(t)})),window.activeDeActiveUser=function(t){$.ajax({url:usersUrl+"/"+t+"/active-de-active",method:"post",cache:!1,success:function(t){t.success&&e.ajax.reload(null,!1)},error:function(e){displayToastr("Error","error",e.responseJSON.message)}})}}))})();